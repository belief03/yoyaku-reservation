# 📖 Yoyaku予約システム 取説

**個人美容院経営者向け 完全ガイド**

---

## 📌 このシステムについて

### 何ができるの？

このシステムは、お客様がインターネットから直接予約できる**予約受付システム**です。

**ホットペッパービューティーや公式LINEと並行して使えます。**

- ✅ お客様が24時間いつでも予約できる
- ✅ 予約状況をパソコンやスマホで確認できる
- ✅ お客様情報を自動で管理できる
- ✅ クーポンやキャンペーンを簡単に配布できる
- ✅ 予約の確認・変更・キャンセルが簡単

### 他の予約システムとの違い

| 項目 | ホットペッパー | 公式LINE | このシステム |
|------|--------------|---------|-------------|
| 手数料 | あり | なし | **なし** |
| 24時間予約 | 可能 | 可能 | **可能** |
| カスタマイズ | 不可 | 限定的 | **自由** |
| データ管理 | 外部 | 外部 | **自分で管理** |
| 初期費用 | なし | なし | **なし** |

---

## 🚀 システムの起動方法

### 準備するもの

- パソコン（Windows/MacどちらでもOK）
- インターネット接続
- 既に設定済みのSupabaseアカウント

### 起動手順（超簡単！）

**たった1つのコマンドで起動します！**

1. **パソコンでコマンドプロンプト（またはPowerShell）を開く**

2. **プロジェクトのフォルダに移動**
   ```
   cd C:\Users\user\Desktop\coursor\yoyaku
   ```
   （※ 実際のフォルダの場所に合わせて変更してください）

3. **サーバーを起動**
   ```
   python -m api.main
   ```

4. **起動完了の確認**
   
   画面に以下のような表示が出たら成功です：
   ```
   INFO:     Uvicorn running on http://0.0.0.0:8000
   INFO:     Application startup complete.
   ```

   **これで完了です！** サーバーが動いています。

### 起動したら何ができる？

起動後、以下のURLにアクセスできます：

| URL | 用途 |
|-----|------|
| `http://localhost:8000/` | **お客様用の予約画面** |
| `http://localhost:8000/admin` | **あなた用の管理画面** |
| `http://localhost:8000/health` | システムの状態確認 |

---

## 💻 日常的な使い方

### 1. システムを起動する（毎日）

営業開始前に、パソコンでシステムを起動します。

```bash
python -m api.main
```

**注意**: この画面を閉じるとシステムが止まります。  
営業中はこの画面を開いたままにしておいてください。

### 2. お客様に予約URLを教える

お客様には以下のURLを教えてください：

```
http://localhost:8000/
```

**ただし！** `localhost`はあなたのパソコン内だけで使えるアドレスです。

**お客様に使ってもらうには、以下のいずれかの方法が必要です：**

#### 方法A: インターネット上に公開する（推奨）

- レンタルサーバーやクラウドサービス（例：Heroku、AWS、さくらのVPSなど）にシステムを設置
- 独自ドメインを取得して設定（例：`https://yoursalon.com`）

#### 方法B: 同じWi-Fi内で使う

- お客様があなたのサロンのWi-Fiに接続している場合のみ使用可能
- パソコンのIPアドレスを確認して、`http://[あなたのIPアドレス]:8000` を教える

### 3. 管理画面で予約を確認する

1. ブラウザで `http://localhost:8000/admin` を開く
2. 「予約管理」をクリック
3. 予約一覧が表示されます

### 4. サービスや商品を登録する

管理画面から：
- 「サービス管理」→ 新しいサービスを追加
- 「商品管理」→ 新しい商品を追加
- 「スタイリスト管理」→ スタイリスト情報を登録

### 5. クーポンやキャンペーンを作る

管理画面から：
- 「キャンペーン管理」→ 新しいキャンペーンを作成
- 「クーポン管理」→ クーポンコードを発行

---

## 👥 お客様への案内方法

### 案内文の例

**SNSやメールでお客様に案内する場合：**

```
【新サービス開始のお知らせ】

いつもご利用ありがとうございます。
この度、24時間いつでもご予約いただける
オンライン予約システムを導入いたしました！

▼ご予約はこちらから
https://yoursalon.com

※ホットペッパービューティーやLINEからの
  ご予約も引き続き承っております。
```

### QRコードを作る

1. 予約URLをQRコード生成サイトでQRコード化
2. サロンの受付やSNSに掲載
3. お客様がスマホで読み取るだけで予約画面にアクセス

---

## 📱 お客様の使い方（お客様向け）

### 予約の流れ

1. **予約URLにアクセス**
   - スマホやパソコンからURLを開く

2. **「予約する」タブをクリック**

3. **必要事項を入力**
   - メールアドレス（必須）
   - お名前
   - 電話番号
   - 希望のサービス
   - 希望日
   - 希望時間

4. **「予約を確定」ボタンをクリック**

5. **完了！**
   - 予約が確定します
   - メールアドレスに確認メールが届きます（設定している場合）

### 予約の確認・変更・キャンセル

1. **予約URLにアクセス**
2. **「予約履歴」タブをクリック**
3. **メールアドレスを入力して検索**
4. **予約一覧が表示される**
5. **変更やキャンセルが可能**

---

## 🛠️ よくある操作

### サービスを追加する

1. 管理画面を開く（`http://localhost:8000/admin`）
2. 「サービス管理」をクリック
3. 「新規作成」ボタンをクリック
4. 以下を入力：
   - サービス名（例：カット、カラー、パーマなど）
   - 価格
   - 所要時間
   - 説明
5. 「保存」をクリック

### 予約を確認する

1. 管理画面を開く
2. 「予約管理」をクリック
3. 予約一覧が表示されます
4. 各予約の詳細を確認できます

### 予約をキャンセルする

1. 管理画面の「予約管理」から該当予約を探す
2. 予約をクリックして詳細を開く
3. 「キャンセル」ボタンをクリック

### お客様情報を確認する

1. 管理画面を開く
2. 「顧客管理」をクリック
3. お客様一覧が表示されます
4. 各お客様の予約履歴や注文履歴を確認できます

---

## ⚠️ トラブルシューティング

### システムが起動しない

**エラー: ポート8000が使用中**

→ 他のプログラムがポート8000を使っています。

**解決方法：**
1. 他のサーバーを停止する
2. または、別のポート番号を使う：
   ```
   uvicorn api.main:app --port 8001
   ```
   （この場合、URLは `http://localhost:8001` になります）

**エラー: モジュールが見つからない**

→ 必要なプログラムがインストールされていません。

**解決方法：**
```
pip install -r requirements.txt
```

### お客様が予約画面にアクセスできない

**原因1: システムが起動していない**

→ パソコンでシステムを起動してください。

**原因2: `localhost`を使っている**

→ `localhost`はあなたのパソコン内だけで使えるアドレスです。  
お客様に使ってもらうには、インターネット上に公開する必要があります。

**解決方法：**
- レンタルサーバーやクラウドサービスにシステムを設置
- または、同じWi-Fi内で使う場合は、パソコンのIPアドレスを確認

**原因3: ファイアウォールがブロックしている**

→ Windowsのファイアウォールが接続をブロックしている可能性があります。

**解決方法：**
1. Windowsの設定を開く
2. 「セキュリティ」→「ファイアウォール」を開く
3. ポート8000を許可する設定を追加

### 予約が保存されない

**原因: Supabaseへの接続エラー**

**解決方法：**
1. `.env`ファイルを確認
   - `SUPABASE_URL`が正しく設定されているか
   - `SUPABASE_KEY`が正しく設定されているか
2. 接続テストを実行：
   ```
   python scripts/test_connection.py
   ```
3. Supabaseのダッシュボードでプロジェクトがアクティブか確認

### 画面が真っ白になる

**原因: JavaScriptの読み込みエラー**

**解決方法：**
1. ブラウザの更新ボタンを押す（F5キー）
2. ブラウザのキャッシュをクリアする
3. 別のブラウザで試す（Chrome、Firefox、Edgeなど）

---

## 💡 便利な使い方のコツ

### 1. 営業時間外の予約受付

システムを24時間起動しておけば、営業時間外でもお客様が予約できます。  
翌朝、管理画面で予約を確認して、お客様に確認の連絡を入れましょう。

### 2. クーポンで集客

- 新規お客様向けの初回割引クーポン
- リピーター向けのリピート割引クーポン
- 季節限定キャンペーン

管理画面から簡単に作成・配布できます。

### 3. お客様の来店履歴を管理

- いつ来店したか
- どんなサービスを受けたか
- 次回の来店予定

すべて自動で記録されます。

### 4. スタイリスト別の予約管理

複数のスタイリストがいる場合、スタイリストごとに予約を管理できます。

### 5. 商品の販売もできる

ヘアケア商品やスタイリング剤なども、システムで販売できます。

---

## 📞 困ったときは

### システムが動かない

1. **エラーメッセージを確認**
   - 画面に表示されているエラーメッセージをメモする
   - ログファイル（`logs/`フォルダ内）を確認

2. **接続テストを実行**
   ```
   python scripts/test_connection.py
   ```
   エラーが出たら、その内容を確認

3. **システムを再起動**
   - 一度システムを停止（Ctrl+C）
   - 再度起動してみる

### データが消えた

- Supabaseのダッシュボードでデータを確認
- バックアップがあれば復元

### 予約が重複している

- 管理画面の「予約管理」で確認
- 重複している予約を削除

---

## 🎯 運用のポイント

### 毎日の流れ

1. **営業開始前**
   - システムを起動
   - 管理画面で本日の予約を確認
   - お客様に確認の連絡（必要に応じて）

2. **営業中**
   - 予約が入ったら管理画面で確認
   - お客様の来店時に予約を確認

3. **営業終了後**
   - 本日の予約状況を確認
   - システムは起動したままにしておく（24時間予約受付の場合）

### 週次・月次の確認

- **週次**: 予約状況の確認、キャンペーンの効果確認
- **月次**: 売上集計、お客様の来店頻度の確認

---

## 📚 関連ドキュメント

より詳しい技術的な情報が必要な場合は、以下を参照してください：

- [システム起動ガイド](STARTUP_GUIDE.md) - 技術的な詳細
- [セットアップチェックリスト](SETUP_CHECKLIST.md) - 初期設定の手順
- [Supabase設定ガイド](SUPABASE_SETUP.md) - データベースの設定

---

## ✅ チェックリスト

### 初回セットアップ

- [ ] Supabaseアカウントを作成
- [ ] データベースの設定を完了
- [ ] `.env`ファイルに認証情報を設定
- [ ] 接続テストが成功
- [ ] システムが起動できる

### 日常運用

- [ ] サービス情報を登録
- [ ] スタイリスト情報を登録
- [ ] お客様に予約URLを案内
- [ ] 管理画面で予約を確認
- [ ] クーポンやキャンペーンを作成

---

## 🎉 最後に

このシステムは、あなたの美容院の予約管理を楽にするためのツールです。

**ホットペッパービューティーや公式LINEと並行して使うことで、**
**お客様に複数の予約方法を提供でき、より便利になります。**

わからないことがあれば、エラーメッセージやログを確認して、
一つずつ解決していきましょう。

**あなたの美容院の成功を応援しています！✨**

---

*最終更新: 2025年12月*




