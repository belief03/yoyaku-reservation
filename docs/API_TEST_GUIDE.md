# API動作確認ガイド

ブラウザ上でAPIの実装状況を確認する方法です。

## 📋 確認方法

### 1. APIドキュメント（Swagger UI）で確認

ブラウザで以下にアクセス：
```
http://localhost:8000/docs
```

#### 確認手順

1. **各エンドポイントの展開**
   - 各カテゴリ（reservations, customers, stylists など）をクリックして展開
   - 各エンドポイントの詳細を確認

2. **エンドポイントのテスト**
   - エンドポイントをクリックして展開
   - 「Try it out」ボタンをクリック
   - パラメータを入力（必要に応じて）
   - 「Execute」ボタンをクリック
   - レスポンスを確認

### 2. 主要なエンドポイントの確認

#### ✅ 基本情報
- `GET /` - プロジェクト情報
- `GET /health` - ヘルスチェック

#### ✅ サービス管理
- `GET /api/v1/services/` - サービス一覧
- `GET /api/v1/services/{service_id}` - サービス詳細
- `POST /api/v1/services/` - サービス作成（テスト用）

#### ✅ スタイリスト管理
- `GET /api/v1/stylists/` - スタイリスト一覧
- `GET /api/v1/stylists/{stylist_id}` - スタイリスト詳細

#### ✅ 顧客管理
- `GET /api/v1/customers/` - 顧客一覧
- `GET /api/v1/customers/{customer_id}` - 顧客詳細
- `POST /api/v1/customers/` - 顧客作成（テスト用）

#### ✅ 予約管理
- `GET /api/v1/reservations/` - 予約一覧
- `GET /api/v1/reservations/availability/slots` - 利用可能時間枠
- `POST /api/v1/reservations/` - 予約作成（テスト用）

#### ✅ 商品管理
- `GET /api/v1/products/` - 商品一覧
- `GET /api/v1/products/{product_id}` - 商品詳細

#### ✅ 注文管理
- `GET /api/v1/orders/` - 注文一覧
- `POST /api/v1/orders/` - 注文作成（テスト用）

#### ✅ クーポン管理
- `GET /api/v1/coupons/` - クーポン一覧
- `POST /api/v1/coupons/validate` - クーポン検証

#### ✅ キャンペーン管理
- `GET /api/v1/campaigns/` - キャンペーン一覧
- `GET /api/v1/campaigns/active` - アクティブなキャンペーン

#### ✅ ストレージ
- `GET /api/v1/storage/list` - ファイル一覧

## 🧪 テストシナリオ

### シナリオ1: サービス一覧の取得

1. `GET /api/v1/services/` を開く
2. 「Try it out」をクリック
3. パラメータ（オプション）:
   - `page`: 1
   - `page_size`: 10
4. 「Execute」をクリック
5. レスポンスコード `200` とサービス一覧を確認

### シナリオ2: 顧客の作成と確認

1. `POST /api/v1/customers/` を開く
2. 「Try it out」をクリック
3. リクエストボディを入力:
   ```json
   {
     "email": "test@example.com",
     "name": "テスト太郎",
     "phone": "090-1234-5678"
   }
   ```
4. 「Execute」をクリック
5. 作成された顧客情報を確認
6. 作成された `id` をコピー
7. `GET /api/v1/customers/{customer_id}` で詳細を確認

### シナリオ3: 利用可能時間枠の確認

1. `GET /api/v1/reservations/availability/slots` を開く
2. 「Try it out」をクリック
3. パラメータを入力:
   - `date`: `2025-12-29`（明日の日付）
4. 「Execute」をクリック
5. 利用可能な時間枠のリストを確認

### シナリオ4: クーポンの検証

1. `POST /api/v1/coupons/validate` を開く
2. 「Try it out」をクリック
3. リクエストボディを入力:
   ```json
   {
     "code": "WELCOME10",
     "total_amount": 5000
   }
   ```
4. 「Execute」をクリック
5. クーポンの有効性と割引金額を確認

## 📊 確認ポイント

### ✅ 正常系の確認

- [ ] 各GETエンドポイントが正常にデータを返す
- [ ] ページネーションが機能する
- [ ] フィルタリングが機能する
- [ ] レスポンスの形式が正しい

### ✅ エラーハンドリングの確認

- [ ] 存在しないIDで404エラーが返る
- [ ] 不正なリクエストで400エラーが返る
- [ ] エラーメッセージが適切に表示される

### ✅ データ整合性の確認

- [ ] 関連データが正しく取得できる（予約と顧客、サービスなど）
- [ ] 日時のフォーマットが正しい
- [ ] ステータス値が正しい

## 🔍 トラブルシューティング

### エラーが発生する場合

1. **404エラー**
   - エンドポイントのURLが正しいか確認
   - サーバーが起動しているか確認

2. **500エラー**
   - サーバーのログを確認
   - データベース接続を確認

3. **422エラー（バリデーションエラー）**
   - リクエストボディの形式を確認
   - 必須フィールドが入力されているか確認

### データが表示されない場合

1. データベースにデータが存在するか確認
2. `database/seed.sql` を実行してテストデータを投入
3. Supabaseダッシュボードでテーブルを確認

## 📝 確認結果の記録

各エンドポイントのテスト結果を記録しておくと便利です：

- ✅ 正常に動作
- ⚠️ 動作するが改善の余地あり
- ❌ エラーが発生

---

## 🎯 次のステップ

すべてのエンドポイントの動作確認が完了したら：

1. フロントエンドアプリケーションの開発
2. 本番環境へのデプロイ準備
3. 追加機能の実装






