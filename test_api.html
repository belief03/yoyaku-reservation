<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yoyaku API å‹•ä½œç¢ºèª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 20px;
        }
        .status.online {
            background: #4caf50;
            color: white;
        }
        .status.offline {
            background: #f44336;
            color: white;
        }
        .endpoint-group {
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
        }
        .endpoint-group h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }
        .endpoint {
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .endpoint-info {
            flex: 1;
        }
        .endpoint-method {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }
        .method-get { background: #4caf50; color: white; }
        .method-post { background: #2196f3; color: white; }
        .method-patch { background: #ff9800; color: white; }
        .method-delete { background: #f44336; color: white; }
        .endpoint-path {
            font-family: 'Courier New', monospace;
            color: #666;
        }
        button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        button.test {
            background: #667eea;
            color: white;
        }
        button.test:hover {
            background: #5568d3;
        }
        button.docs {
            background: #4caf50;
            color: white;
        }
        button.docs:hover {
            background: #45a049;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        .result.success {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
        }
        .result.error {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }
        .result pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 12px;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .api-link {
            text-align: center;
            margin: 20px 0;
        }
        .api-link a {
            display: inline-block;
            padding: 12px 30px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .api-link a:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Yoyaku Reservation System - APIå‹•ä½œç¢ºèª</h1>
        <div id="status" class="status offline">ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ã‚’ç¢ºèªä¸­...</div>
        
        <div class="api-link">
            <a href="http://localhost:8000/docs" target="_blank">ğŸ“š è©³ç´°ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é–‹ã</a>
        </div>

        <div class="endpoint-group">
            <h2>åŸºæœ¬æƒ…å ±</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/</span>
                </div>
                <button class="test" onclick="testEndpoint('/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/health</span>
                </div>
                <button class="test" onclick="testEndpoint('/health', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-basic" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/services/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/services/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-services" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>ã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/stylists/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/stylists/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-stylists" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>é¡§å®¢ç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/customers/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/customers/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-customers" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>äºˆç´„ç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/reservations/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/reservations/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/reservations/availability/slots?date=2025-12-29</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/reservations/availability/slots?date=2025-12-29', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-reservations" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>å•†å“ç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/products/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/products/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-products" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>æ³¨æ–‡ç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/orders/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/orders/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-orders" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>ã‚¯ãƒ¼ãƒãƒ³ç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/coupons/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/coupons/', 'GET')">æµ‹è¯•</button>
            </div>
            <div id="result-coupons" class="result"></div>
        </div>

        <div class="endpoint-group">
            <h2>ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ç®¡ç†</h2>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/campaigns/</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/campaigns/', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div class="endpoint">
                <div class="endpoint-info">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v1/campaigns/active</span>
                </div>
                <button class="test" onclick="testEndpoint('/api/v1/campaigns/active', 'GET')">ãƒ†ã‚¹ãƒˆ</button>
            </div>
            <div id="result-campaigns" class="result"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';
        
        // ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
        async function checkStatus() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                const statusEl = document.getElementById('status');
                if (data.status === 'healthy') {
                    statusEl.textContent = 'âœ… ã‚µãƒ¼ãƒãƒ¼ç¨¼åƒä¸­';
                    statusEl.className = 'status online';
                } else {
                    statusEl.textContent = 'âš ï¸ ã‚µãƒ¼ãƒãƒ¼å¿œç­”ç•°å¸¸';
                    statusEl.className = 'status offline';
                }
            } catch (error) {
                const statusEl = document.getElementById('status');
                statusEl.textContent = 'âŒ ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã¾ã›ã‚“';
                statusEl.className = 'status offline';
            }
        }

        // ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
        async function testEndpoint(path, method = 'GET') {
            const resultId = getResultId(path);
            const resultEl = document.getElementById(resultId);
            resultEl.style.display = 'block';
            resultEl.className = 'result';
            resultEl.innerHTML = '<div class="loading"></div> ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¸­...';

            try {
                const url = `${API_BASE}${path}`;
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };

                const response = await fetch(url, options);
                const data = await response.json();

                if (response.ok) {
                    resultEl.className = 'result success';
                    resultEl.innerHTML = `
                        <strong>âœ… æˆåŠŸ (${response.status})</strong>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                } else {
                    resultEl.className = 'result error';
                    resultEl.innerHTML = `
                        <strong>âŒ ã‚¨ãƒ©ãƒ¼ (${response.status})</strong>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                resultEl.className = 'result error';
                resultEl.innerHTML = `
                    <strong>âŒ ã‚¨ãƒ©ãƒ¼</strong>
                    <pre>${error.message}</pre>
                `;
            }
        }

        // çµæœã‚¨ãƒªã‚¢ã®IDã‚’å–å¾—
        function getResultId(path) {
            if (path.startsWith('/api/v1/services')) return 'result-services';
            if (path.startsWith('/api/v1/stylists')) return 'result-stylists';
            if (path.startsWith('/api/v1/customers')) return 'result-customers';
            if (path.startsWith('/api/v1/reservations')) return 'result-reservations';
            if (path.startsWith('/api/v1/products')) return 'result-products';
            if (path.startsWith('/api/v1/orders')) return 'result-orders';
            if (path.startsWith('/api/v1/coupons')) return 'result-coupons';
            if (path.startsWith('/api/v1/campaigns')) return 'result-campaigns';
            return 'result-basic';
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
        checkStatus();
        setInterval(checkStatus, 30000); // 30ç§’ã”ã¨ã«ç¢ºèª
    </script>
</body>
</html>






